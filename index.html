<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>绩效面谈漫画书</title>
    <style>
        body {
            background-color: #2c3e50;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            perspective: 2000px;
            font-family: "Microsoft YaHei", sans-serif;
            overflow: hidden;
        }
        .book {
            width: 450px;
            height: 650px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
        }
        .book.open {
            transform: translateX(50%);
        }
        .page {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            transform-origin: left;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.645, 0.045, 0.355, 1);
        }
        .front, .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            background: white;
            box-shadow: inset 20px 0 50px rgba(0,0,0,0.1), 0 10px 20px rgba(0,0,0,0.3);
            border-radius: 0 5px 5px 0;
        }
        .back {
            transform: rotateY(180deg);
            border-radius: 5px 0 0 5px;
        }
        img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        .flipped {
            transform: rotateY(-180deg);
        }
        .hint {
            position: fixed;
            bottom: 30px;
            color: #bdc3c7;
            background: rgba(0,0,0,0.3);
            padding: 8px 20px;
            border-radius: 30px;
            pointer-events: none;
        }
    </style>
</head>
<body>

<div class="book" id="book">
    <div class="page" id="p3" style="z-index: 1;">
        <div class="front"><img src="绩效面谈漫画04.png"></div>
        <div class="back" style="background:#ecf0f1;"></div> 
    </div>

    <div class="page" id="p2" style="z-index: 2;">
        <div class="front"><img src="绩效面谈漫画02.png"></div>
        <div class="back"><img src="绩效面谈漫画03.png"></div>
    </div>

    <div class="page" id="p1" style="z-index: 3;">
        <div class="front"><img src="封面.png"></div>
        <div class="back"><img src="绩效面谈漫画01.png"></div>
    </div>
</div>

<div class="hint">使用键盘 ← → 或 点击屏幕两侧翻页</div>

<script>
    const book = document.getElementById('book');
    const p1 = document.getElementById('p1');
    const p2 = document.getElementById('p2');
    const p3 = document.getElementById('p3');
    
    let currentState = 0; // 0: 封面, 1: 看到01+02, 2: 看到03+04, 3: 结束

    function updateBook() {
        // 重置所有层级
        p1.style.zIndex = 3;
        p2.style.zIndex = 2;
        p3.style.zIndex = 1;

        if (currentState === 0) {
            book.classList.remove('open');
            p1.classList.remove('flipped');
            p2.classList.remove('flipped');
            p3.classList.remove('flipped');
        } 
        else if (currentState === 1) {
            book.classList.add('open');
            p1.classList.add('flipped');
            p2.classList.remove('flipped');
            p3.classList.remove('flipped');
            // 翻开第一张后，第一张要置底，防止挡住后面的反面
            p1.style.zIndex = 1;
            p2.style.zIndex = 3; 
            p3.style.zIndex = 2;
        } 
        else if (currentState === 2) {
            book.classList.add('open');
            p1.classList.add('flipped');
            p2.classList.add('flipped');
            p3.classList.remove('flipped');
            // 翻开第二张后，第二张置底
            p1.style.zIndex = 1;
            p2.style.zIndex = 2;
            p3.style.zIndex = 3;
        }
        else if (currentState === 3) {
            p3.classList.add('flipped');
            p3.style.zIndex = 4;
        }
    }

    function goNext() {
        if (currentState < 3) {
            currentState++;
            updateBook();
        }
    }

    function goPrev() {
        if (currentState > 0) {
            currentState--;
            updateBook();
        }
    }

    // 交互监听
    window.addEventListener('mousedown', (e) => {
        if (e.clientX > window.innerWidth / 2) goNext();
        else goPrev();
    });

    window.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight') goNext();
        else if (e.key === 'ArrowLeft') goPrev();
    });
</script>

</body>
</html>